<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chattr XP • Neon (v18)</title>
<style>
  :root { --bg:#111216; --surface:#1E1F24; --text:#F8FAFC; --primary:#0EA5E9; --secondary:#EC4899; --success:#10B981; --danger:#ef4444; --muted:#94a3b8; }
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .wrap{min-height:100dvh;display:flex;align-items:center;justify-content:center}
  .card{width:min(860px,94vw);background:var(--surface);border-radius:20px;padding:22px 20px;box-shadow:0 10px 30px rgba(0,0,0,.35);position:relative}
  h1,h2,h3{margin:8px 0}.center{text-align:center}.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .topbar{position:absolute;right:16px;top:14px;display:flex;gap:8px}
  .iconbtn{background:transparent;border:1px solid var(--muted);color:var(--text);border-radius:12px;padding:8px 10px;cursor:pointer}
  .btn{background:var(--primary);color:#fff;border:0;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600;transition:transform .16s}
  .btn:disabled{opacity:.5;cursor:not-allowed} .btn:hover{transform:translateY(-1px)} .ghost{background:transparent;border:1px solid var(--muted);color:var(--text)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:12px 0}
  .answer{padding:14px;background:#20232a;border-radius:14px;cursor:pointer;user-select:none;transition:transform .12s,background .12s}
  .answer:hover{transform:scale(1.02);background:#262a33}.correct{background:var(--success)!important}.wrong{background:var(--danger)!important}
  .bar{height:12px;width:100%;background:#2a2e36;border-radius:8px;overflow:hidden;margin:8px 0 4px}
  .bar>div{height:100%;width:0%;background:linear-gradient(90deg,var(--secondary),var(--primary));transition:width .28s}
  .meta{color:var(--muted);font-size:14px}.emoji{font-size:38px}.avatars span{font-size:32px;padding:6px 10px;border-radius:10px;cursor:pointer}
  .avatars span.sel{outline:2px solid var(--secondary)} .hide{display:none!important} .spacer{height:8px}
  .badge{font-size:12px;color:#aaa}.confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden}.piece{position:absolute;font-size:22px;animation:fall 1.2s linear forwards}
  @keyframes fall{to{transform:translateY(100vh) rotate(360deg);opacity:0}}
  .modalBackdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;padding:16px}
  .modal{background:#1c1d22;border:1px solid #2b2e36;border-radius:16px;padding:18px;max-width:700px;width:100%}
  .modal h3{margin-top:0}
  .field{display:flex;flex-direction:column;gap:6px;margin:8px 0}
  .chip{display:inline-flex;align-items:center;gap:8px;border:1px solid #39404c;border-radius:999px;padding:8px 12px;cursor:pointer}
  .chip.sel{border-color:var(--primary);box-shadow:0 0 0 2px rgba(14,165,233,.25) inset}
  .chip input{accent-color:var(--primary)}
  .row.space{justify-content:space-between}
</style>
</head>
<body>
<div class="wrap">
  <div class="card" id="screen-start">
    <div class="topbar">
      <button class="iconbtn" id="btn-gear" title="Parent settings">⚙️</button>
    </div>
    <div class="center">
      <div class="emoji">✨</div>
      <h1>Chattr XP</h1>
      <p class="meta">Practice real-world social moves. Earn XP. Unlock codes.</p>
      <p class="badge">v18</p>
      <h3>Pick an avatar</h3>
      <div class="row avatars" id="avatars">
        <span>😎✨</span><span>🎧⚡</span><span>🏀💥</span><span>🎮⭐</span><span>📚💡</span><span>🧠🔓</span>
      </div>
      <div class="spacer"></div>
      <button class="btn" id="btn-start">Play</button>
    </div>
  </div>

  <div class="card hide" id="screen-quiz">
    <div class="row" style="justify-content:space-between">
      <div><span id="avatar" class="emoji">😎✨</span></div>
      <div class="meta">🔥 Streak: <b id="streak">0</b></div>
    </div>
    <div class="bar"><div id="xpfill"></div></div>
    <div class="meta"><span id="xptext">XP 0</span> · Level <span id="level">1</span></div>
    <div class="meta" id="activeAreas" style="margin:6px 0"></div>

    <h3 id="qtext" style="margin-top:10px"></h3>
    <div class="grid" id="answers"></div>
    <div class="meta" id="feedback" style="margin-top:6px"></div>
    <div class="row space" style="margin-top:12px">
      <button class="btn ghost" id="btn-exit">Exit</button>
      <button class="btn" id="btn-next" disabled>Next</button>
    </div>
  </div>

  <div class="card hide" id="screen-cooldown">
    <div class="center">
      <h2>Nice work 🔥</h2>
      <p class="meta">Keep the reps
